--CREATE DATABASE TALLER2GUIA3;

USE TALLER2GUIA3;

CREATE TABLE EQUIPO (
	CODIGO_EQUIPO INT IDENTITY (1,1) PRIMARY KEY NOT NULL,
	NOMBRE NVARCHAR (45) NOT NULL,
	ESTADIO NVARCHAR (45) NOT NULL,
	CIUDAD NVARCHAR (45) NOT NULL,
	AFORO INT NOT NULL,
	ANIO INT NOT NULL,
);

CREATE TABLE JUGADOR (
	CODIGO_JUGADOR INT IDENTITY (1,1) NOT NULL PRIMARY KEY,
	CODIGO_EQUIPO INT NOT NULL,
	NUMERO_DOC INT NOT NULL,
	NOMBRE NVARCHAR (50) NOT NULL,
	POSICIOIN NVARCHAR (50) NOT NULL,
	FECHA_NAC DATE NOT NULL,
	FOREIGN KEY (CODIGO_EQUIPO) REFERENCES EQUIPO(CODIGO_EQUIPO)
);

CREATE TABLE PRESIDENTE (
	ID_PRESIDENTE INT IDENTITY (1,1) NOT NULL PRIMARY KEY,
	CODIGO_EQUIPO INT NOT NULL,
	NUMERO_DOC INT NOT NULL,
	NOMBRE NVARCHAR (50) NOT NULL,
	ANIO_INGRESO INT NOT NULL,
	FECHA_NAC DATE NOT NULL,
	FOREIGN KEY (CODIGO_EQUIPO) REFERENCES EQUIPO(CODIGO_EQUIPO)
);

CREATE TABLE GOL (
    CODIGO_GOL INT IDENTITY(1,1) NOT NULL PRIMARY KEY, 
    MINUTO INT NOT NULL,
    DESCRIPCION NVARCHAR(50) NOT NULL
);

CREATE TABLE JUGADOR_GOL (
    CODIGO_JUGADOR INT NOT NULL,   
    CODIGO_GOL INT NOT NULL,           
    PRIMARY KEY (CODIGO_JUGADOR, CODIGO_GOL),
    FOREIGN KEY (CODIGO_JUGADOR) REFERENCES JUGADOR(CODIGO_JUGADOR),
    FOREIGN KEY (CODIGO_GOL) REFERENCES GOL(CODIGO_GOL)
);

CREATE TABLE PARTIDO (
    CODIGO_PARTIDO INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
    FECHA DATETIME NOT NULL, 
    GOLES_VISITANTE INT NOT NULL, 
    GOLES_LOCAL INT NOT NULL 
);


CREATE TABLE PARTIDO_GOL (
    CODIGO_PARTIDO INT NOT NULL,   
    CODIGO_GOL INT NOT NULL,           
    PRIMARY KEY (CODIGO_PARTIDO, CODIGO_GOL),
    FOREIGN KEY (CODIGO_PARTIDO) REFERENCES PARTIDO(CODIGO_PARTIDO),
    FOREIGN KEY (CODIGO_GOL) REFERENCES GOL(CODIGO_GOL)
);

CREATE TABLE PARTIDO_EQUIPO (
    CODIGO_PARTIDO INT NOT NULL,
    CODIGO_EQUIPO INT NOT NULL,
    TIPO_EQUIPO NVARCHAR(10) NOT NULL,
    PRIMARY KEY (CODIGO_PARTIDO, CODIGO_EQUIPO),
    FOREIGN KEY (CODIGO_PARTIDO) REFERENCES PARTIDO(CODIGO_PARTIDO),
    FOREIGN KEY (CODIGO_EQUIPO) REFERENCES EQUIPO(CODIGO_EQUIPO)
);
